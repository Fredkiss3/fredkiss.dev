---
import { match } from "@formatjs/intl-localematcher";
import Negotiator from "negotiator";
import { locales, defaultLocale } from "~/i18n/config.mjs";

// Should be SSR'ed
export const prerender = false;

const headers = Astro.request.headers;
let languages = new Negotiator({
  headers: Object.fromEntries(headers.entries()),
}).languages();
const matchedLanguage = match(languages, locales, defaultLocale);

return Astro.redirect(`/${matchedLanguage}/`);
---
